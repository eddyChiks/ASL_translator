{% extends "app/layout.html" %}

{% block content %}

<div class="jumbotron">
    <h1>ASL Translator</h1>
    <p class="lead">Activate your webcam and direct left hand towards it</p>
    {% if not activate %}
        <form action="{% url 'activate_cam' %}" method="post">
            {% csrf_token %}
            <button type="submit" name="activate" class="btn btn-primary btn-large" value={{activate|yesno:"False,True"}}>Activate cam</button>
        </form>
        {% if message is not None %}
            <div style="background-color:rgba(241, 245, 127, 1);border:2px groove yellow;padding-left:10px;margin-top:20px;width:30%">
              <h3>{{message}}</h3>
            </div> 
        {% endif %}
    {% else %}
        <div class="container">
            <div class="row">
                <div class="col-md-7 well">
                    <div>
                        <img src="http://localhost:8000/cam/" alt="Error" width=500 height=380 style="display:block;margin:auto">
                    </div>
                </div>
                <div class="col-md-5 well">
                    <h2 style="text-align:center">Translation</h2>
                    <div class="form-group" style="margin-top:25px">
                        <label for="translation">Your translated text:</label>
                        <textarea class="form-control" rows="5" id="translation" placeholder="You can edit translated text whether by showing corresponding sign or directly in a textbox "></textarea>
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <form action="{% url 'activate_cam' %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="cam" value="{{cam}}">
                        <button type="submit" name="deactivate" class="btn btn-primary btn-large" value={{activate|yesno:"false,true"}} style="float:left">Deactivate cam</button>
                    </form>
                    <div style="float:right">
                        <button type="submit" id="rec" class="btn btn-success btn-large" url="{% url 'record' %}" style="margin-bottom:15px">Record letter</button>
                    </div>
                </div>
                <div class="col-md-6">
                </div>
            </div>
        </div>
    {% endif %}
</div>

<div class="row">
    <div class="col-md-4">
        <h2>What is ASL?</h2>
        <p>
            American Sign Language (ASL) is a complete, natural language that has the same linguistic properties as spoken languages...
        </p>
        <p><a class="btn btn-default" href="https://www.nidcd.nih.gov/health/american-sign-language">More about ASL &raquo;</a></p>
    </div>
    <div class="col-md-4"></div>
    <div class="col-md-4">
        <h2>Learn signs</h2>
        <p>If youd are not familiar with ASL alphabet but want to leverage the core functionality of the website or just learn new skill click button below </p>
        <p><a class="btn btn-default" href="{% url 'signs' %}">Learn more &raquo;</a></p>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script type="text/javascript">
$('#rec').click(function(){
    $.ajax(
    {
        type: "GET",
        url: $('#rec').attr("url"),
        data: {
            current_text:$('#translation').val()
        },
        success : function(data)
        {
            $('#translation').val(data)
        } 
    })
});

    $('#translation').on("input", function (e) {
        $('#translation').val($(e.target).val())
    });
</script>
{% endblock %}
